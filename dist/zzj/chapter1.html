<!DOCTYPE html>
<html lang="zh-CN" data-theme="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>逍遥游 - 庄子 - 道德经</title>
    <meta name="description" content="道德经多版本对照平台 - 王弼本 · 河上公本 · 王夫之 · 憨山德清 | 帛书 · 郭店简">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>☯</text></svg>">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="./assets/css/style.css" rel="stylesheet">
    <style>

.original-text {
    font-family: 'KaiTi', '楷体', serif;
    font-size: clamp(1.5rem, 2.8vw, 2.2rem);
    line-height: 2;
    text-align: center;
    padding: 1.5rem;
}
/* 疑难字标注 - 纯CSS方案 */
.difficult {
    border-bottom: 1px dashed var(--accent-color);
    cursor: help;
    position: relative;
    display: inline-block;
    transition: background-color 0.2s;
}
.difficult:hover {
    background-color: rgba(212, 165, 116, 0.15);
}
/* 悬停提示 - 显示在文字上方 */
.difficult:hover::after {
    content: attr(data-pinyin) ": " attr(data-meaning);
    position: absolute;
    bottom: 130%;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(44, 24, 16, 0.95);
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    z-index: 9999;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    pointer-events: none;
}
/* 小箭头 */
.difficult:hover::before {
    content: "";
    position: absolute;
    bottom: 120%;
    left: 50%;
    transform: translateX(-50%);
    border: 5px solid transparent;
    border-top-color: rgba(44, 24, 16, 0.95);
}
[data-theme="dark"] .difficult:hover::after {
    background-color: rgba(232, 224, 216, 0.95);
    color: #2c1810;
}
[data-theme="dark"] .difficult:hover::before {
    border-top-color: rgba(232, 224, 216, 0.95);
}
.modern-text {
    line-height: 1.8;
    font-size: 1.05rem;
}
.note-text {
    line-height: 1.8;
}
.english-text {
    line-height: 1.6;
    font-family: Georgia, serif;
}
.chapter-navigation .page-link {
    border-color: var(--border-color);
}
#versionTabs .nav-link {
    color: var(--text-primary);
    border-color: transparent;
}
#versionTabs .nav-link:hover {
    background-color: rgba(212, 165, 116, 0.1);
}
#versionTabs .nav-link.active {
    color: var(--accent-color);
    border-color: var(--accent-color);
}
#englishTabs .nav-link {
    color: var(--text-primary);
}
#englishTabs .nav-link.active {
    background-color: var(--accent-color);
}
.version-content {
    line-height: 1.8;
}
.version-original-text {
    padding: 0.75rem;
    background-color: var(--bg-secondary);
    border-left: 3px solid var(--accent-color);
    border-radius: 4px;
}

    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container-fluid">
            <button class="navbar-toggler d-lg-none me-2" type="button" id="sidebarToggle">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand" href="./index.html">
                <span class="brand-icon">☯</span>
                <span class="brand-text">道德经</span>
            </a>
            <span class="navbar-text ms-3 d-none d-md-block">逍遥游</span>
            <div class="ms-auto d-flex align-items-center gap-2">
                <!-- 音乐控制 -->
                <div class="music-controls d-flex align-items-center">
                    <button class="btn btn-sm btn-outline-light media-btn" id="musicToggle" title="背景音乐">
                        <span class="music-icon">🎵</span>
                    </button>
                    <button class="btn btn-sm btn-outline-light media-btn d-none" id="musicLoop" title="循环播放">
                        <span class="loop-icon">🔁</span>
                    </button>
                </div>

                <div class="media-divider"></div>

                <!-- 朗读控制 -->
                <div class="speech-controls d-flex align-items-center">
                    <button class="btn btn-sm btn-outline-light media-btn" id="speechToggle" title="朗读原文">
                        <span class="speech-icon">🔊</span>
                    </button>
                    <button class="btn btn-sm btn-outline-light media-btn d-none" id="speechStop" title="停止朗读">
                        ⏹
                    </button>
                </div>

                <!-- AI解读按钮 -->
                <button class="btn btn-sm btn-outline-light ai-btn" id="aiToggle" title="AI解读">
                    <span>🤖</span>
                </button>

                <!-- AI创新功能下拉菜单 -->
                <div class="dropdown">
                    <button class="btn btn-sm btn-outline-warning dropdown-toggle" type="button" data-bs-toggle="dropdown" title="AI创新功能">
                        <span>✨</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><h6 class="dropdown-header">AI创新功能</h6></li>
                        <li>
                            <button class="dropdown-item" id="knowledgeGraphBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="me-2">
                                    <circle cx="12" cy="12" r="3"></circle>
                                    <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"></path>
                                </svg>
                                概念关系图谱
                            </button>
                        </li>
                        <li>
                            <button class="dropdown-item" id="commentaryChatBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="me-2">
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                </svg>
                                与注释家对话
                            </button>
                        </li>
                        <li>
                            <button class="dropdown-item" id="philosophyDialogueBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="me-2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>
                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>
                                </svg>
                                跨文明哲学对话
                            </button>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li><h6 class="dropdown-header">实用工具</h6></li>
                        <li>
                            <button class="dropdown-item" id="noteBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="me-2">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                                阅读笔记
                            </button>
                        </li>
                        <li>
                            <button class="dropdown-item" id="quoteBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="me-2">
                                    <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                                    <polyline points="16 6 12 2 8 6"></polyline>
                                    <line x1="12" y1="2" x2="12" y2="15"></line>
                                </svg>
                                生成引用卡片
                            </button>
                        </li>
                    </ul>
                </div>

                <!-- 暗黑模式切换 -->
                <button class="btn btn-sm btn-outline-light" id="themeToggle" title="切换模式">
                    <span class="theme-icon">🌙</span>
                </button>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <aside class="col-lg-2 col-md-3 sidebar" id="sidebar">
                <div class="sidebar-content">
                    <h6 class="sidebar-title">目录</h6>
                    <div class="chapter-list" id="chapterList">
                        <nav class="nav flex-column">
<a class="nav-link chapter-item active" href="./chapter1.html">
    <span class="chapter-num">第1章</span>
</a>
<a class="nav-link chapter-item " href="./chapter2.html">
    <span class="chapter-num">第2章</span>
</a>
<a class="nav-link chapter-item " href="./chapter3.html">
    <span class="chapter-num">第3章</span>
</a>
<a class="nav-link chapter-item " href="./chapter4.html">
    <span class="chapter-num">第4章</span>
</a>
<a class="nav-link chapter-item " href="./chapter5.html">
    <span class="chapter-num">第5章</span>
</a>
<a class="nav-link chapter-item " href="./chapter6.html">
    <span class="chapter-num">第6章</span>
</a>
<a class="nav-link chapter-item " href="./chapter7.html">
    <span class="chapter-num">第7章</span>
</a>
<a class="nav-link chapter-item " href="./chapter8.html">
    <span class="chapter-num">第8章</span>
</a>
<a class="nav-link chapter-item " href="./chapter9.html">
    <span class="chapter-num">第9章</span>
</a>
<a class="nav-link chapter-item " href="./chapter10.html">
    <span class="chapter-num">第10章</span>
</a>
<a class="nav-link chapter-item " href="./chapter11.html">
    <span class="chapter-num">第11章</span>
</a>
<a class="nav-link chapter-item " href="./chapter12.html">
    <span class="chapter-num">第12章</span>
</a>
<a class="nav-link chapter-item " href="./chapter13.html">
    <span class="chapter-num">第13章</span>
</a>
<a class="nav-link chapter-item " href="./chapter14.html">
    <span class="chapter-num">第14章</span>
</a>
<a class="nav-link chapter-item " href="./chapter15.html">
    <span class="chapter-num">第15章</span>
</a>
<a class="nav-link chapter-item " href="./chapter16.html">
    <span class="chapter-num">第16章</span>
</a>
<a class="nav-link chapter-item " href="./chapter17.html">
    <span class="chapter-num">第17章</span>
</a>
<a class="nav-link chapter-item " href="./chapter18.html">
    <span class="chapter-num">第18章</span>
</a>
<a class="nav-link chapter-item " href="./chapter19.html">
    <span class="chapter-num">第19章</span>
</a>
<a class="nav-link chapter-item " href="./chapter20.html">
    <span class="chapter-num">第20章</span>
</a>
<a class="nav-link chapter-item " href="./chapter21.html">
    <span class="chapter-num">第21章</span>
</a>
<a class="nav-link chapter-item " href="./chapter22.html">
    <span class="chapter-num">第22章</span>
</a>
<a class="nav-link chapter-item " href="./chapter23.html">
    <span class="chapter-num">第23章</span>
</a>
<a class="nav-link chapter-item " href="./chapter24.html">
    <span class="chapter-num">第24章</span>
</a>
<a class="nav-link chapter-item " href="./chapter25.html">
    <span class="chapter-num">第25章</span>
</a>
<a class="nav-link chapter-item " href="./chapter26.html">
    <span class="chapter-num">第26章</span>
</a>
<a class="nav-link chapter-item " href="./chapter27.html">
    <span class="chapter-num">第27章</span>
</a>
<a class="nav-link chapter-item " href="./chapter28.html">
    <span class="chapter-num">第28章</span>
</a>
<a class="nav-link chapter-item " href="./chapter29.html">
    <span class="chapter-num">第29章</span>
</a>
<a class="nav-link chapter-item " href="./chapter30.html">
    <span class="chapter-num">第30章</span>
</a>
<a class="nav-link chapter-item " href="./chapter31.html">
    <span class="chapter-num">第31章</span>
</a>
<a class="nav-link chapter-item " href="./chapter32.html">
    <span class="chapter-num">第32章</span>
</a>
<a class="nav-link chapter-item " href="./chapter33.html">
    <span class="chapter-num">第33章</span>
</a>
                        </nav>
                    </div>
                </div>
            </aside>

            <main class="col-lg-10 col-md-9 main-content" id="mainContent">

    <nav aria-label="章节导航" class="chapter-nav mb-3">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="./index.html">目录</a></li>
            <li class="breadcrumb-item active">逍遥游</li>
        </ol>
    </nav>

    <section class="idioms-section mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">📖 相关成语</h5>
            </div>
            <div class="card-body">
                <div id="idiomsContainer">
                    <span class="text-muted">本章暂无收录相关成语</span>
                </div>
            </div>
        </div>
    </section>

    <section class="original-section mb-4">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">逍遥游 · 原文</h5>
                <div class="btn-group btn-group-sm">
                    <button type="button" class="btn btn-outline-secondary" id="copyOriginal" title="复制原文">复制</button>
                </div>
            </div>
            <div class="card-body">
                <div class="original-text" id="originalText">
                    北<span class="difficult" data-pinyin="míng" data-meaning="幽暗，深不可测">冥</span>有鱼，其名为鲲。鲲之大，不知其几千里也。化而为鸟，其名为鹏。鹏之背，不知其几千里也；怒而飞，其翼若垂天之云。是鸟也，海运则将徙于南<span class="difficult" data-pinyin="míng" data-meaning="幽暗，深不可测">冥</span>。南<span class="difficult" data-pinyin="míng" data-meaning="幽暗，深不可测">冥</span>者，天池也。

《齐谐》者，志怪者也。《谐》之言曰：鹏之徙于南<span class="difficult" data-pinyin="míng" data-meaning="幽暗，深不可测">冥</span>也，水击三千里，抟扶摇而上者九万里，去以六月息者也。野马也，尘埃也，生物之以息相吹也。天之苍苍，其正色邪？其远而无所至极邪？其视下也，亦若是则已矣。

且夫水之积也不厚，则其负大舟也无力。覆杯水于坳堂之上，则芥为之舟；置杯焉则胶，水浅而舟大也。风之积也不厚，则其负大翼也无力。故九万里，则风斯在下矣，而后乃今培风；背负青天而莫之夭阏者，而后乃今将图南。

蜩与学鸠笑之曰：我决起而飞，抢榆枋，时则不至，而控于地而已矣，奚以之九万里而南为？适莽苍者，三餐而反，腹<span class="difficult" data-pinyin="yóu" data-meaning="犹豫，警惕">犹</span>果然；适百里者，宿舂粮；适千里者，三月聚粮。之二虫又何知！小知不及大知，小年不及大年。奚以知其然也？朝菌不知晦朔，蟪蛄不知春秋，此小年也。楚之南有<span class="difficult" data-pinyin="míng" data-meaning="幽暗，深不可测">冥</span>灵者，以五百岁为春，五百岁为秋；上古有大椿者，以八千岁为春，八千岁为秋。此大年也。而彭祖乃今以久特闻，众人匹之，不亦悲乎！

汤之问棘也是已：穷发之北，有<span class="difficult" data-pinyin="míng" data-meaning="幽暗，深不可测">冥</span>海者，天池也。有鱼焉，其广数千里，未有知其修者，其名为鲲。有鸟焉，其名为鹏，背若泰山，翼若垂天之云；抟扶摇羊角而上者九万里，绝云气，负青天，然后图南，且适南<span class="difficult" data-pinyin="míng" data-meaning="幽暗，深不可测">冥</span>也。斥安鸟笑之曰：彼且奚适也？我腾跃而上，不过数仞而下，翱翔蓬蒿之间，此亦飞之至也。而彼且奚适也？此小大之辩也。

故夫知效一官，行比一乡，德合一君，而征一国者，其自视也，亦若此矣。而宋荣子<span class="difficult" data-pinyin="yóu" data-meaning="犹豫，警惕">犹</span>然笑之。且举世而誉之而不加劝，举世而非之而不加沮，定乎内外之分，辩乎荣辱之境，斯已矣。彼其于世，未数数然也。虽然，<span class="difficult" data-pinyin="yóu" data-meaning="犹豫，警惕">犹</span>有未树也。夫列子御风而行，泠然善也，旬有五日而后反。彼于致福者，未数数然也。此虽免乎行，<span class="difficult" data-pinyin="yóu" data-meaning="犹豫，警惕">犹</span>有所待者也。若夫乘天地之正，而御六气之辩，以游无穷者，彼且恶乎待哉？故曰：至人无己，神人无功，圣人无名。
                </div>
            </div>
        </div>
    </section>

    <section class="modern-section mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">现代白话译文</h5>
            </div>
            <div class="card-body">
                <p class="modern-text mb-0">北海有一条鱼，它的名字叫做鲲。鲲的体积巨大，不知道有几千里长。后来鲲变化成为一只鸟，名字叫做鹏。鹏的背脊，不知道有几千里长；当它振翅飞翔的时候，那展开的双翅就像悬挂在天空的云彩。这只鸟，当海动风起时就迁往南海。南海，就是天然的大池。

《齐谐》是记载怪异之事的书。《齐谐》上的话说：当鹏迁往南海的时候，振翅拍水，水面上激起三千里的波涛；鹏乘着旋风盘旋而上，一直飞到九万里的高空；它离开北海，是乘着六月的大风才去的。野马般的雾气，飞扬的尘埃，都是生物用气息相吹拂的结果。天色深蓝，是它真正的颜色呢？还是因为太远而没有尽头呢？鹏从高空往下看，也不过像人在地面上看天一样罢了。

水聚积得不深，那么它浮载大船就没有力量。倒杯水在堂上的低洼处，那么只能拿小草作船；放上一只杯子就粘住沉底了，这是因为水太浅而船太大了。风聚积得不够大，那么它承载巨大的翅膀就没有力量。所以鹏飞上九万里的高空，风就在下面了，然后才能乘风；背负着青天，没有什么东西阻挡它，然后才能谋划往南飞。

蝉和斑鸠嘲笑鹏说：我奋力起飞，碰到榆树和檀树就停下来，有时飞不到，也就落在地上罢了，为什么要飞九万里到南海去呢？到郊野去的人，只带三餐而当天返回，肚子还是饱饱的；到百里之外去的人，前一晚就要舂米准备粮食；到千里之外去的人，要提前三个月准备粮食。这两只小动物又知道什么呢！小智不能了解大智，寿命短的不能了解寿命长的。怎么知道是这样的呢？朝菌不知道月初和月底，蟪蛄不知道春天和秋天，这是寿命短的。楚国南边有只冥灵龟，以五百年为一个春季，五百年为一个秋季；上古有棵大椿树，以八千年为一个春季，八千年为一个秋季。这是寿命长的。彭祖到现在还以长寿闻名，大家都去和他比，这不是很可悲吗！

商汤问棘也是这样的话：在那草木不生的北方，有一个深海，就是天池。有条鱼，它的宽度有几千里，没有人知道它有多长，它的名字叫做鲲。有只鸟，名字叫做鹏，背脊像泰山，翅膀像悬挂在天空的云彩；乘着旋风盘旋而上九万里，穿过云气，背负着青天，然后计划往南飞，将要到南海去。斥安鸟嘲笑它说：它将要到哪里去呢？我腾跃而上，不过几仞高就落下来，在蓬蒿之间翱翔，这也是飞翔的极致了。而它将要到哪里去呢？这就是小和大的区别。

所以那些才智能够胜任一官之职，品行能够顺应一乡之心，德性能够符合一看之意，能力能够取得一国信任的人，他们看待自己，也像斥安鸟一样。而宋荣子仍然嘲笑他们。而且全世界都称赞他，他也不更加努力；全世界都批评他，他也不沮丧。他认定了内外的区别，辨别了荣辱的界限，就这样罢了。他在世上，并不急切地去追求什么。虽然这样，但他还有未曾树立的境界。列子乘风而行，飘然轻妙，十五天后返回。他对于追求幸福，从来没有急切的样子。这样虽然可以免于步行，但还是有所凭借的。如果能顺应自然的规律，驾驭六气的变化，以游于无穷的境界，他还凭借什么呢？所以说：至人忘我，神人不求建功，圣人不求名声。</p>
            </div>
        </div>
    </section>

    <section class="english-section mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">English Translations / 英文译本</h5>
            </div>
            <div class="card-body p-0">
                <ul class="nav nav-pills mb-0 p-2" id="englishTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#lau" type="button">D.C. Lau</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" data-bs-toggle="pill" data-bs-target="#henricks" type="button">Henricks</button>
                    </li>
                </ul>
                <div class="tab-content p-3">
                    <div class="tab-pane fade show active" id="lau">
                        <p class="english-text mb-0 fst-italic"></p>
                    </div>
                    <div class="tab-pane fade" id="henricks">
                        <p class="english-text mb-0 fst-italic"></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <nav class="chapter-navigation" aria-label="章节翻页">
        <ul class="pagination justify-content-center">
            <li class="page-item disabled"><span class="page-link">← 上一篇</span></li>
            <li class="page-item disabled">
                <span class="page-link">1 / 33</span>
            </li>
            <li class="page-item"><a class="page-link" href="./chapter2.html">第2篇 →</a></li>
        </ul>
    </nav>

            </main>
        </div>
    </div>

    <footer class="footer mt-auto py-3">
        <div class="container text-center text-muted">
            <small>道德经多版本对照平台 | 王弼本 · 河上公本 · 王夫之 · 憨山德清 | 帛书 · 郭店简</small>
        </div>
    </footer>

    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- 背景音乐 -->
    <audio id="bgMusic" loop preload="auto">
        <source src="./assets/audio/gaoshanliushui.mp3" type="audio/mpeg">
    </audio>

    <!-- 音乐音量控制面板 -->
    <div class="volume-panel" id="volumePanel">
        <div class="volume-panel-header">
            <span>音量控制</span>
            <button type="button" class="btn-close btn-close-white" id="closeVolumePanel"></button>
        </div>
        <div class="volume-panel-body">
            <input type="range" class="form-range" id="volumeSlider" min="0" max="100" value="30">
            <div class="volume-level">
                <span id="volumeValue">30</span>%
            </div>
        </div>
    </div>

    <!-- 朗读控制面板 -->
    <div class="speech-panel" id="speechPanel">
        <div class="speech-panel-header">
            <span>朗读设置</span>
            <button type="button" class="btn-close btn-close-white" id="closeSpeechPanel"></button>
        </div>
        <div class="speech-panel-body">
            <div class="speech-option mb-3">
                <label class="form-label">朗读模式</label>
                <div class="btn-group w-100" role="group">
                    <input type="radio" class="btn-check" name="speechMode" id="speechModeCurrent" value="current" checked>
                    <label class="btn btn-outline-light" for="speechModeCurrent">当前章节</label>

                    <input type="radio" class="btn-check" name="speechMode" id="speechModeAll" value="all">
                    <label class="btn btn-outline-light" for="speechModeAll">连续朗读</label>
                </div>
            </div>
            <div class="speech-option">
                <label class="form-label">语速</label>
                <input type="range" class="form-range" id="speechRate" min="50" max="150" value="80">
                <div class="rate-level">
                    <span id="rateValue">0.8</span>x
                </div>
            </div>
            <div class="speech-status mt-3" id="speechStatus">
                准备就绪
            </div>
        </div>
    </div>

    <!-- AI解读侧边栏 -->
    <aside class="ai-sidebar" id="aiSidebar">
        <div class="ai-sidebar-header">
            <h6 class="ai-title">🤖 AI解读</h6>
            <div class="ai-actions">
                <button class="btn btn-sm btn-outline-light" id="aiNewChat" title="新对话">
                    <span>➕</span>
                </button>
                <button class="btn btn-sm btn-outline-light" id="aiCloseSidebar" title="关闭">
                    <span>✕</span>
                </button>
            </div>
        </div>
        <div class="ai-messages" id="aiMessages">
            <div class="ai-welcome">
                <div class="ai-welcome-icon">🤖</div>
                <h6>道德经AI助手</h6>
                <p>您可以：</p>
                <ul>
                    <li>点击下方快捷问题开始</li>
                    <li>或直接输入您的问题</li>
                </ul>
            </div>
        </div>
        <div class="ai-suggestions">
            <button class="ai-suggestion-btn">解释这一章的核心思想</button>
            <button class="ai-suggestion-btn">这段话的哲学含义</button>
            <button class="ai-suggestion-btn">如何在生活中应用</button>
        </div>
        <div class="ai-input-area">
            <div class="ai-input-wrapper">
                <textarea class="ai-input" id="aiInput" placeholder="输入您的问题..." rows="2"></textarea>
                <button class="ai-send-btn" id="aiSendBtn">
                    <span>📤</span>
                </button>
            </div>
            <small class="ai-model-info">
                模型: <span id="aiModelDisplay">自动检测</span>
            </small>
        </div>
    </aside>

    <!-- 设置面板 -->
    <div class="settings-panel" id="settingsPanel">
        <div class="settings-panel-header">
            <span>⚙️ 阅读设置</span>
            <button type="button" class="btn-close btn-close-white" id="closeSettingsPanel"></button>
        </div>
        <div class="settings-panel-body">
            <!-- 阅读模式 -->
            <div class="setting-section">
                <label class="setting-label">阅读模式</label>
                <div class="setting-options">
                    <button class="mode-btn active" data-mode="reading">
                        <span class="mode-icon">📖</span>
                        <span class="mode-text">阅读</span>
                    </button>
                    <button class="mode-btn" data-mode="zen">
                        <span class="mode-icon">🧘</span>
                        <span class="mode-text">禅读</span>
                    </button>
                    <button class="mode-btn" data-mode="recite">
                        <span class="mode-icon">📝</span>
                        <span class="mode-text">背诵</span>
                    </button>
                </div>
            </div>

            <!-- 字体选择 -->
            <div class="setting-section">
                <label class="setting-label">字体选择</label>
                <select class="form-select form-select-sm" id="fontSelect">
                    <option value="default">系统默认</option>
                    <option value="kaiti">楷体</option>
                    <option value="songti">宋体</option>
                    <option value="fangsong">仿宋</option>
                    <option value="mingliu">明体</option>
                    <option value="xkai">华文行楷</option>
                </select>
            </div>

            <!-- 字体大小 -->
            <div class="setting-section">
                <label class="setting-label">字体大小</label>
                <div class="font-size-control">
                    <button class="size-btn" data-size="small">小</button>
                    <button class="size-btn active" data-size="medium">中</button>
                    <button class="size-btn" data-size="large">大</button>
                </div>
            </div>

            <!-- 文字布局 -->
            <div class="setting-section">
                <label class="setting-label">文字布局</label>
                <div class="setting-options">
                    <button class="layout-btn active" data-layout="center">
                        <span class="layout-icon">📍</span>
                        <span class="layout-text">居中</span>
                    </button>
                    <button class="layout-btn" data-layout="left">
                        <span class="layout-icon">⬅️</span>
                        <span class="layout-text">靠左</span>
                    </button>
                </div>
            </div>

            <!-- 背景音乐 -->
            <div class="setting-section">
                <label class="setting-label">背景音乐</label>
                <select class="form-select form-select-sm mb-2" id="musicSelect">
                    <option value="none">关闭</option>
                    <option value="chinese">中国古典（古琴/琵琶）</option>
                    <option value="western">西方古典（钢琴/小提琴）</option>
                </select>
                <div class="volume-control-inline">
                    <span class="volume-label">音量</span>
                    <input type="range" class="form-range form-range-sm" id="musicVolumeSlider" min="0" max="100" value="30">
                    <span class="volume-value" id="musicVolumeValue">30%</span>
                </div>
            </div>

            <!-- 显示选项 -->
            <div class="setting-section">
                <label class="setting-label">显示选项</label>
                <div class="setting-toggles">
                    <label class="toggle-item">
                        <input type="checkbox" id="showPinyin" checked>
                        <span>显示拼音</span>
                    </label>
                    <label class="toggle-item">
                        <input type="checkbox" id="showAnnotation" checked>
                        <span>显示释义</span>
                    </label>
                </div>
            </div>

            <!-- 版本选择 -->
            <div class="setting-section">
                <label class="setting-label">显示版本</label>
                <div class="version-toggles">
                    <label class="toggle-item">
                        <input type="checkbox" id="showModern" checked>
                        <span>白话译文</span>
                    </label>
                    <label class="toggle-item">
                        <input type="checkbox" id="showNotes" checked>
                        <span>注解版本</span>
                    </label>
                    <label class="toggle-item">
                        <input type="checkbox" id="showEnglish">
                        <span>英文译本</span>
                    </label>
                </div>
            </div>

            <!-- AI设置 -->
            <div class="setting-section">
                <label class="setting-label">AI API配置</label>
                <input type="password" class="form-control form-control-sm mb-2" id="deepseekKey" placeholder="DeepSeek API Key (可选)">
                <input type="password" class="form-control form-control-sm" id="openaiKey" placeholder="OpenAI API Key (可选)">
                <small class="text-muted d-block mt-1">
                    API Key仅存储在本地，不会上传服务器
                </small>
            </div>

            <!-- 语音朗读设置 -->
            <div class="setting-section">
                <label class="setting-label">🎙️ 语音朗读设置</label>
                <div class="mb-2">
                    <label class="small text-muted">选择语音：</label>
                    <select class="form-select form-select-sm" id="browserVoice">
                        <option value="">正在加载可用语音...</option>
                    </select>
                    <small class="text-muted d-block">
                        提示：Microsoft语音质量最佳，搜索"Microsoft"或"Chinese"
                    </small>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/js/modules/theme.js"></script>
    <script src="./assets/js/modules/sidebar.js"></script>
    <script src="./assets/js/modules/music.js"></script>
    <script src="./assets/js/modules/shortcuts.js"></script>
    <script src="./assets/js/modules/pwa.js"></script>
    <script src="./assets/js/modules/local-search.js"></script>
    <script src="./assets/js/modules/notes.js"></script>
    <script src="./assets/js/modules/quote-card.js"></script>
    <script src="./assets/js/modules/knowledge-graph.js"></script>
    <script src="./assets/js/modules/commentary-chat.js"></script>
    <script src="./assets/js/modules/philosophy-dialogue.js"></script>
    <script src="./assets/js/main.js"></script>
    <script>

// 复制原文
document.getElementById('copyOriginal')?.addEventListener('click', function() {
    const text = document.getElementById('originalText').innerText;
    navigator.clipboard.writeText(text).then(() => {
        this.textContent = '已复制';
        setTimeout(() => this.textContent = '复制', 2000);
    });
});

// 成语标签悬停效果
document.querySelectorAll('.idiom-tag').forEach(tag => {
    tag.addEventListener('click', function() {
        // 点击成语时显示详细信息（可选功能）
        const meaning = this.getAttribute('title');
        if (meaning) {
            alert(meaning.replace(/&#10;/g, '\n'));
        }
    });
});

    </script>
</body>
</html>
